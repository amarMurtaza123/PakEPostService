{% extends 'core/base.html' %}
{% load static %}

{% block base_title %} {{ request.user }} {% endblock %}

{% block base_links %}{% endblock %}

{% block content %}
<style>
    body{
        background: rgb(31,31,31);
        background: linear-gradient(90deg, rgba(31,31,31,1) 0%, rgba(71,67,67,1) 50%, rgba(31,31,31,1) 100%);
}

body::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

    body::-webkit-scrollbar-track {
        background-color: #222222;
    }

    body::-webkit-scrollbar-thumb {
        background-color: #FEC506;
        outline: 1px solid black;
        border-radius: 5px;
    }
</style>

    <div class="row">
        <div style="margin: 12px;">
            {% if request.user.first_name %}
            <h1 style="color: white;">Welcome! <span
                    class="d-none d-xl-inline-block ml-1">{{ request.user.first_name }}</span></h1>
            {% else %}
            <h1 style="color: white;">Welcome! <span
                    class="d-none d-xl-inline-block ml-1">{{ request.user.username }}</span></h1>
            {% endif %}
            <h6 style="color: white;">Post Office: <span
                    class="d-none d-xl-inline-block ml-1">{{ request.user.city }}</span></h6>
            <h6 style="color: white;">Postal Code: <span class="d-none d-xl-inline-block ml-1">{{ request.user.postal_code }}</span>
            </h6>
            <h6 style="color: white;">Email: <span class="d-none d-xl-inline-block ml-1">{{ request.user.email }}</span>
            </h6>

        </div>
        <div class="col-xl-12">
            <div class="row">
                <div class="col-sm-3">
                    <div class="card mini-stats-wid">
                        <div class="card-body">
                            <div class="media">
                                <div class="mr-3 align-self-center">
                                    <i class="mdi mdi-arrow-down h2 text-success mb-0"></i>
                                </div>
                                <div class="media-body">
                                    <p class="text-muted mb-2">Received Parcels</p>
                                    <h5 class="mb-0">
                                        {{ parcels_received }}
                                    </h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="card mini-stats-wid">
                        <div class="card-body">
                            <div class="media">
                                <div class="mr-3 align-self-center">
                                    <i class="mdi mdi-arrow-up h2 text-danger mb-0"></i>
                                </div>
                                <div class="media-body">
                                    <p class="text-muted mb-2">Sent Parcels</p>
                                    <h5 class="mb-0">
                                        {{ parcels_sent }}
                                    </h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <!-- end row -->

            <div class="card">
                <div class="card-body">
                    <h4 class="card-title mb-3">Overview of last 7 days</h4>
                    <div id="chart">
                    </div>
                </div>
            </div>
        </div>
    </div>
    {##}
    {#    <div class="row">#}
    {#        <div class="col-lg-12">#}
    {#            <div class="card">#}
    {#                <div class="card-body">#}
    {##}
    {#                    <h4 class="card-title mb-4">Recent Posts</h4>#}
    {#                        <div class="mt-4">#}
    {#                            <div class="table-responsive">#}
    {#                                <table class="table table-centered table-nowrap table-hover">#}
    {#                                    <thead class="thead-light">#}
    {#                                    <tr>#}
    {#                                        <th scope="col">Transaction ID</th>#}
    {#                                        <th scope="col">Sender</th>#}
    {#                                        <th scope="col">Receiver</th>#}
    {#                                        <th scope="col">Amount</th>#}
    {#                                        <th scope="col">Transfer</th>#}
    {#                                        <th scope="col">Date</th>#}
    {#                                        <th scope="col">Method</th>#}
    {#                                        <th scope="col">Status</th>#}
    {#                                        <th scope="col">Action</th>#}
    {#                                    </tr>#}
    {#                                    </thead>#}
    {#                                    <tbody>#}
    {#                                        {% for foo in '12345'|make_list %}#}
    {#                                        <tr>#}
    {#                                            <td>#}
    {#                                                <h5 class="text-truncate font-size-14"><a href="#"#}
    {#                                                                                          class="text-dark">#00</a>#}
    {#                                                </h5>#}
    {#                                                <p class="text-muted mb-0"></p>#}
    {#                                            </td>#}
    {#                                            <td>#}
    {#                                                <div class="row">#}
    {#                                                    <div class="cols pr-4">#}
    {#                                                            <img class="rounded-circle avatar-xs"#}
    {#                                                                 src="{% static 'core/images/no-user.png' %}" alt="">#}
    {#                                                    </div>#}
    {#                                                    <div class="cols">#}
    {#                                                        <a href="#">#}
    {#                                                                <h5 class="text-truncate font-size-14 mb-0">#}
    {#                                                                    Name#}
    {#                                                                </h5>#}
    {##}
    {#                                                            <p class="text-muted mb-0">#}
    {#                                                                <i class="fa fa-wallet"></i> 321673982#}
    {#                                                            </p>#}
    {#                                                        </a>#}
    {#                                                    </div>#}
    {#                                                </div>#}
    {#                                            </td>#}
    {#                                            <td>#}
    {#                                                <div class="row">#}
    {#                                                    <div class="cols pr-4">#}
    {#                                                            <img class="rounded-circle avatar-xs"#}
    {#                                                                 src="{% static 'core/images/no-user.png' %}" alt="">#}
    {#                                                    </div>#}
    {#                                                    <div class="cols">#}
    {#                                                        <a href="#">#}
    {#                                                                <h5 class="text-truncate font-size-14 mb-0">#}
    {#                                                                    Name#}
    {#                                                                </h5>#}
    {##}
    {#                                                            <p class="text-muted mb-0">#}
    {#                                                                <i class="fa fa-wallet"></i> 37927892#}
    {#                                                            </p>#}
    {#                                                        </a>#}
    {#                                                    </div>#}
    {#                                                </div>#}
    {#                                            </td>#}
    {#                                            <td>#}
    {#                                                <b>100</b>#}
    {#                                            </td>#}
    {#                                            <td>#}
    {#                                                <h5 class="text-truncate font-size-14">#}
    {#                                                        <b class="text-success"><i class="fa fa-arrow-up"></i>#}
    {#                                                            Received#}
    {#                                                        </b>#}
    {#                                                </h5>#}
    {#                                            </td>#}
    {#                                            <td>28th Feb, 2022</td>#}
    {#                                            <td class="text-warning">#}
    {#                                                <span class="badge badge-dark">?</span>#}
    {#                                            </td>#}
    {#                                                <td class="text-success">#}
    {#                                                    <b class=""><i>#}
    {#                                                            class="fa fa-check-circle"></i> {{ object.get_status_display }}#}
    {#                                                    </b>#}
    {#                                                </td>#}
    {#                                            <td>#}
    {#                                                <a href="#"><b><i#}
    {#                                                        class="fa fa-eye"></i> view</b>#}
    {#                                                </a>#}
    {#                                            </td>#}
    {#                                        </tr>#}
    {#                                        {% endfor %}#}
    {##}
    {##}
    {#                                    </tbody>#}
    {#                                </table>#}
    {#                            </div>#}
    {#                        </div>#}
    {##}
    {#                        <div class="">#}
    {#                            <a href="#"><b><i class="fa fa-link"></i> View More</b></a>#}
    {#                        </div>#}
    {#                </div>#}
    {#            </div>#}
    {#        </div>#}
    {#    </div>#}

{% endblock %}

{% block base_internal_scripts %}
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
{% endblock %}

{% block base_external_scripts %}
    <script>
        let cats = {{ categories }};
        var cats_str = [];
        for (let i = 0; i < cats.length; i++) {
            cats_str.push(cats[i].toString().substring(0, 4) + "-" + cats[i].toString().substring(4, 6)
                + "-" + cats[i].toString().substring(6, 8));
        }
        console.log(cats_str);


        var options = {
            series: [{
                name: 'Parcels received',
                data: {{ list_received }}
            }, {
                name: 'Parcels sent',
                data: {{ list_sent }}
            }],
            chart: {
                height: 225,
                type: 'area'
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                curve: 'smooth'
            },
            xaxis: {
                type: 'number',
                categories: cats_str
            }
        };

        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();

    </script>
{% endblock %}






